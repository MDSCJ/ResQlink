<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contributor Portal - Flood Management</title>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="contributor.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  
    <header class="header-banner-container">
        <img src="header.jpg" alt="Flood Management System Banner" class="actual-header-image">
    </header>

    <nav>

        <ul class="nav-links">
            <li><a href="index.html"><span class="lang-en">Home</span><span class="lang-si">р╢╕р╖Фр╢╜р╖К р╢┤р╖Тр╢зр╖Фр╖А</span><span class="lang-ta">роорпБроХрокрпНрокрпБ</span></a></li>
            <li><a href="datamap.html"><span class="lang-en">Data Map</span><span class="lang-si">р╢пр╢нр╖Кр╢н р╖Гр╖Тр╢нр╖Тр╢║р╢╕</span><span class="lang-ta">родро░ро╡рпБ ро╡ро░рпИрокроЯроорпН</span></a></li>
            <li><a href="contributor.html" class="active"><span class="lang-en">Contributor</span><span class="lang-si">р╢пр╖Пр╢║р╢Ър╢║р╖П</span><span class="lang-ta">рокроЩрпНроХро│ро┐рокрпНрокро╛ро│ро░рпН</span></a></li>
            <li><a href="distributer.html"><span class="lang-en">Distributer</span><span class="lang-si">р╢╢р╖Щр╢пр╖Пр╖Др╢╗р╖Тр╢▒р╖Кр╢▒р╖П</span><span class="lang-ta">рокропрогро┐</span></a></li>
            <li><a href="victim.html"><span class="lang-en">Victim</span><span class="lang-si">р╖Ар╖Тр╢┤р╢нр╢з р╢┤р╢нр╖К р╢Ер╢║</span><span class="lang-ta">рокро╛родро┐роХрпНроХрокрпНрокроЯрпНроЯро╡ро░рпН</span></a></li>
            <li><a href="admin.html"><span class="lang-en">Admin</span><span class="lang-si">р╢┤р╢╗р╖Тр╢┤р╖Пр╢╜р╢Ъ</span><span class="lang-ta">роиро┐ро░рпНро╡ро╛роХроорпН</span></a></li>
            <li><a href="about.html"><span class="lang-en">About</span><span class="lang-si">р╢Ер╢┤ р╢Ьр╖Рр╢▒</span><span class="lang-ta">роОроЩрпНроХро│рпИрокрпН рокро▒рпНро▒ро┐</span></a></li>
            <li><a href="#" onclick="localStorage.removeItem('siteLang'); location.reload();" style="color: #ffcc00;"><span class="lang-en">ЁЯМР Lang</span><span class="lang-si">ЁЯМР р╢╖р╖Пр╖Вр╖Пр╖А</span><span class="lang-ta">ЁЯМР роорпКро┤ро┐</span></a></li>
        </ul>
    </nav>

    <div class="page-container">
        
        <aside class="sidebar">
            <div class="sidebar-header">
                <span class="lang-en">Dashboard</span>
                <span class="lang-si">р╢┤р╖Фр╖Ар╢╗р╖Фр╖А</span>
                <span class="lang-ta">роЯро╛ро╖рпНрокрпЛро░рпНроЯрпБ</span>
            </div>
            
            <ul class="sidebar-menu">
                <li>
                    <a href="#" class="sidebar-link active-side" data-target="make-contribution">
                        <i class="fas fa-hand-holding-heart"></i>
                        <span class="lang-en">Make Contribution</span>
                        <span class="lang-si">р╢пр╖Пр╢║р╢Ър╢нр╖Кр╖Ар╢║р╢Ър╖К р╢пр╖Щр╢▒р╖Кр╢▒</span>
                        <span class="lang-ta">рокроЩрпНроХро│ро┐рокрпНрокрпИроЪрпН роЪрпЖропрпНропрпБроЩрпНроХро│рпН</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-link" data-target="supplier-details">
                        <i class="fas fa-id-card"></i>
                        <span class="lang-en">Supplier Details</span>
                        <span class="lang-si">р╖Гр╖Рр╢┤р╢║р╖Фр╢╕р╖Кр╢Ър╢╗р╖Ф р╖Ар╖Тр╖Гр╖Кр╢нр╢╗</span>
                        <span class="lang-ta">роЪрокрпНро│рпИропро░рпН ро╡ро┐ро╡ро░роЩрпНроХро│рпН</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-link" data-target="supply-history">
                        <i class="fas fa-history"></i>
                        <span class="lang-en">Supply History</span>
                        <span class="lang-si">р╖Гр╖Рр╢┤р╢║р╖Фр╢╕р╖К р╢Йр╢нр╖Тр╖Др╖Пр╖Гр╢║</span>
                        <span class="lang-ta">ро╡ро┐роиро┐ропрпЛроХ ро╡ро░ро▓ро╛ро▒рпБ</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-link" data-target="distributor-contacts">
                        <i class="fas fa-address-book"></i>
                        <span class="lang-en">Distributor Contacts</span>
                        <span class="lang-si">р╢╢р╖Щр╢пр╖Пр╖Др╢╗р╖Тр╢▒р╖Кр╢▒р╖П р╢Ер╢╕р╢нр╢▒р╖Кр╢▒</span>
                        <span class="lang-ta">ро╡ро┐роиро┐ропрпЛроХро╕рпНродро░рпН родрпКроЯро░рпНрокрпБроХро│рпН</span>
                    </a>
                </li>
            </ul>
        </aside>

        <main class="content-area">
            
            <section id="make-contribution" class="content-section active-section">
                <h2 class="section-title">
                    <span class="lang-en">Make a Supply Drop</span>
                    <span class="lang-si">р╖Гр╖Рр╢┤р╢║р╖Фр╢╕р╖К р╢Ср╢Ър╢нр╖Фр╖Ар╢Ър╖К р╖Гр╖Пр╢пр╢▒р╖Кр╢▒</span>
                    <span class="lang-ta">ро╡ро┤роЩрпНроХро▓рпН родрпКроХрпБрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН</span>
                </h2>
                
                <form id="supply-batch-form">
                    
                    <div id="items-list-container"></div>

                    <div class="add-more-wrapper">
                        <button type="button" id="btn-add-row">
                            <i class="fas fa-plus"></i> 
                            <span class="lang-en">Add Another Item</span>
                            <span class="lang-si">р╢нр╖Ар╢нр╖К р╢Ер╢║р╖Тр╢нр╢╕р╢║р╢Ър╖К р╢Ср╢Ър╖К р╢Ър╢╗р╢▒р╖Кр╢▒</span>
                            <span class="lang-ta">рооро▒рпНро▒рпКро░рпБ рокрпКро░рпБро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН</span>
                        </button>
                    </div>

                    <hr class="supplier-divider">

                    <div class="form-actions right-align">
                        <button type="submit" class="btn-save">
                            <span class="lang-en">Submit Supply List</span>
                            <span class="lang-si">р╢╜р╖Рр╢║р╖Тр╖Гр╖Кр╢нр╖Фр╖А р╢║р╖Ьр╢╕р╖Ф р╢Ър╢╗р╢▒р╖Кр╢▒</span>
                            <span class="lang-ta">рокроЯрпНроЯро┐ропро▓рпИроЪрпН роЪрооро░рпНрокрпНрокро┐роХрпНроХро╡рпБроорпН</span> 
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </form>
            </section>

            <section id="supply-history" class="content-section">
                <h2 class="section-title">
                    <span class="lang-en">My Supply Records</span>
                    <span class="lang-si">р╢╕р╢Ьр╖Ъ р╖Гр╖Рр╢┤р╢║р╖Фр╢╕р╖К р╖Ар╖Пр╢╗р╖Кр╢нр╖П</span>
                    <span class="lang-ta">роОройродрпБ ро╡ро┤роЩрпНроХро▓рпН рокродро┐ро╡рпБроХро│рпН</span>
                </h2>
                
                <div id="history-container">
                    </div>
                
                <div id="empty-history-msg" style="display:none; text-align:center; padding: 40px; color:#777;">
                    <i class="fas fa-box-open" style="font-size: 40px; margin-bottom: 10px;"></i><br>
                    <span class="lang-en">No supplies recorded yet.</span>
                    <span class="lang-si">р╢нр╖Ар╢╕р╢нр╖К р╢Ър╖Тр╖Гр╖Тр╢пр╖Ф р╖Гр╖Рр╢┤р╢║р╖Фр╢╕р╢Ър╖К р╖Ар╖Пр╢╗р╖Кр╢нр╖П р╖Ар╖У р╢▒р╖Ьр╢╕р╖Рр╢н.</span>
                    <span class="lang-ta">ро╡ро┤роЩрпНроХро▓рпНроХро│рпН роОродрпБро╡рпБроорпН роЗродрпБро╡ро░рпИ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ.</span>
                </div>
            </section>

            <div id="qr-modal-overlay" class="qr-overlay hidden-mode">
                <div class="qr-box">
                    <button class="qr-close-btn" id="btn-close-qr">&times;</button>
                    
                    <div class="qr-content-wrapper">
                        <div class="qr-text-side">
                            <h2>
                                <span class="lang-en">Show this to<br>Distributor</span>
                                <span class="lang-si">р╢╢р╖Щр╢пр╖Пр╖Др╢╗р╖Тр╢▒р╖Кр╢▒р╖Пр╢з<br>р╢┤р╖Щр╢▒р╖Кр╖Ар╢▒р╖Кр╢▒</span>
                                <span class="lang-ta">роЗродрпИ ро╡ро┐роиро┐ропрпЛроХро╕рпНродро░ро┐роЯроорпН<br>роХро╛роЯрпНроЯро╡рпБроорпН</span>
                            </h2>
                            <p>
                                <span class="lang-en">Scan to verify handover</span>
                                <span class="lang-si">р╢нр╖Др╖Ар╖Фр╢╗р╖Ф р╢Ър╢╗р╢Ьр╖Рр╢▒р╖Ур╢╕р╢з р╖Гр╖Кр╢Ър╖Ср╢▒р╖К р╢Ър╢╗р╢▒р╖Кр╢▒</span>
                                <span class="lang-ta">роЪро░ро┐рокро╛ро░рпНроХрпНроХ ро╕рпНроХрпЗройрпН роЪрпЖропрпНропро╡рпБроорпН</span>
                            </p>
                            <div class="qr-hint">
                                <i class="fas fa-info-circle"></i> 
                                <span class="lang-en">You can access this QR code again in your Supply History records.</span>
                                <span class="lang-si">р╢Фр╢╢р╢Ьр╖Ъ р╖Гр╖Рр╢┤р╢║р╖Фр╢╕р╖К р╢Йр╢нр╖Тр╖Др╖Пр╖Гр╢║р╖Щр╢▒р╖К р╢Фр╢╢р╢з р╢▒р╖Рр╖Ар╢н р╢╕р╖Щр╢╕ QR р╢Ър╖Ър╢нр╢║ р╢╜р╢╢р╖П р╢Ьр╢н р╖Др╖Рр╢Ъ.</span>
                                <span class="lang-ta">роЙроЩрпНроХро│рпН ро╡ро┤роЩрпНроХро▓рпН ро╡ро░ро▓ро╛ро▒рпНро▒ро┐ро▓ро┐ро░рпБроирпНродрпБ роЗроирпНрод QR роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роорпАрогрпНроЯрпБроорпН роЕрогрпБроХро▓ро╛роорпН.</span>
                            </div>
                        </div>

                        <div class="qr-image-side">
                            <img id="generated-qr-code" src="" alt="QR Code">
                        </div>
                    </div>
                </div>
            </div>

            <section id="supplier-details" class="content-section">
                
                <div id="supplier-view-mode">
                    
                    <div class="supplier-header">
                        <div class="supplier-profile-img">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBmaWxsPSIjMDAzMzRkIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI1MCIvPjwvc3ZnPg==" 
                                alt="Supplier Profile" 
                                id="display-profile-pic">
                        </div>
                        
                        <div class="supplier-info">
                            <h3 id="display-name">Organization Name</h3>
                            <p id="display-desc">This is a short description of the supplier. It fits within the height of the photo and is limited to about 100 characters.</p>
                        </div>

                        <button class="edit-icon-btn" id="btn-enable-edit" title="Edit Profile">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>

                    <hr class="supplier-divider">

                    <div class="supplier-gallery" id="display-gallery">
                        <div class="gallery-item">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMDAgMTUwIiBmaWxsPSIjMDAyNjMzIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE1MCIvPjwvc3ZnPg==" alt="Work 1">
                            <button class="delete-btn" title="Remove Photo">&times;</button>
                        </div>
                        <div class="gallery-item">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMDAgMTUwIiBmaWxsPSIjMDAyNjMzIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE1MCIvPjwvc3ZnPg==" alt="Work 2">
                            <button class="delete-btn" title="Remove Photo">&times;</button>
                        </div>
                        <div class="gallery-item">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMDAgMTUwIiBmaWxsPSIjMDAyNjMzIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE1MCIvPjwvc3ZnPg==" alt="Work 3">
                            <button class="delete-btn" title="Remove Photo">&times;</button>
                        </div>
                        <div class="gallery-item">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMDAgMTUwIiBmaWxsPSIjMDAyNjMzIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE1MCIvPjwvc3ZnPg==" alt="Work 4">
                            <button class="delete-btn" title="Remove Photo">&times;</button>
                        </div>
                    </div>
                </div>

                <div id="supplier-edit-mode" class="hidden-mode">
                    <h3 class="edit-mode-title">Edit Supplier Details</h3>
                    
                    <form id="supplier-form">
                        <div class="form-group">
                            <label>Profile Photo:</label>
                            <input type="file" id="edit-profile-upload" accept="image/*">
                        </div>

                        <div class="form-group">
                            <label>Name / Organization:</label>
                            <input type="text" id="edit-name" value="Organization Name" class="form-input">
                        </div>

                        <div class="form-group">
                            <label>Description (Max 100 chars):</label>
                            <textarea id="edit-desc" maxlength="100" class="form-input" rows="3">This is a short description of the supplier.</textarea>
                        </div>

                        <hr class="supplier-divider">

                        <div class="form-group">
                            <label>Add New Gallery Photos:</label>
                            <input type="file" id="edit-gallery-upload" multiple accept="image/*">
                            <p class="small-hint">New photos will be added to the top of the list.</p>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="btn-cancel-edit" class="btn-cancel">Cancel</button>
                            <button type="submit" class="btn-save">Save Changes</button>
                        </div>
                    </form>
                </div>

            </section>            

            

            <section id="distributor-contacts" class="content-section">
                <h2 class="section-title">
                    <span class="lang-en">Distributor Contacts</span>
                    <span class="lang-si">р╢╢р╖Щр╢пр╖Пр╖Др╢╗р╖Тр╢▒р╖Кр╢▒р╖Пр╢Ьр╖Ъ р╖Гр╢╕р╖Кр╢╢р╢▒р╖Кр╢░р╢нр╖П</span>
                    <span class="lang-ta">ро╡ро┐роиро┐ропрпЛроХро╕рпНродро░рпН родрпКроЯро░рпНрокрпБроХро│рпН</span>
                </h2>
                <div class="placeholder-box">
                    <p>Contact list goes here.</p>
                </div>
            </section>

        </main>
    </div>

    <div id="dynamic-footer"></div>
    <div id="action-modal-overlay" class="qr-overlay hidden-mode">
        <div class="qr-box" style="max-width: 500px; text-align: center;">
            <button class="qr-close-btn" id="btn-close-action">&times;</button>
            
            <h2 style="color:white; margin-bottom:10px;">
                <span class="lang-en">Manage Record</span>
                <span class="lang-si">р╖Ар╖Пр╢╗р╖Кр╢нр╖Пр╖А р╢Ър╖Ер╢╕р╢▒р╖Пр╢Ър╢╗р╢лр╢║</span>
                <span class="lang-ta">рокродро┐ро╡рпИ роиро┐ро░рпНро╡роХро┐</span>
            </h2>
            <p style="color:#ccc; margin-bottom:30px;">
                <span class="lang-en">Do you want to update or delete this supply record?</span>
                <span class="lang-si">р╢Фр╢╢р╢з р╢╕р╖Щр╢╕ р╖Ар╖Пр╢╗р╖Кр╢нр╖Пр╖А р╢║р╖Пр╖Ар╢нр╖Кр╢Ър╖Пр╢╜р╖Ур╢▒ р╢Ър╖Тр╢╗р╖Ур╢╕р╢з р╖Др╖Э р╢╕р╖Рр╢Ър╖Ур╢╕р╢з р╢Ер╖Ар╖Бр╖КтАНр╢║р╢п?</span>
                <span class="lang-ta">роЗроирпНрод рокродро┐ро╡рпИ рокрпБродрпБрокрпНрокро┐роХрпНроХро╡ро╛ роЕро▓рпНро▓родрпБ роирпАроХрпНроХро╡ро╛?</span>
            </p>

            <div style="display: flex; gap: 15px; justify-content: center;">
                <button id="btn-action-update" class="btn-confirm-transport" style="background:#ffcc00; color:#000;">
                    <span class="lang-en">Update Supply</span>
                    <span class="lang-si">р╢║р╖Пр╖Ар╢нр╖Кр╢Ър╖Пр╢╜р╖Ур╢▒ р╢Ър╢╗р╢▒р╖Кр╢▒</span>
                    <span class="lang-ta">рокрпБродрпБрокрпНрокро┐роХрпНроХро╡рпБроорпН</span>
                </button>
                
                <button id="btn-action-delete" class="btn-confirm-transport" style="background:#ff4444; color:#fff;">
                    <span class="lang-en">Delete Record</span>
                    <span class="lang-si">р╖Ар╖Пр╢╗р╖Кр╢нр╖Пр╖А р╢╕р╢Ър╢▒р╖Кр╢▒</span>
                    <span class="lang-ta">рокродро┐ро╡рпИ роирпАроХрпНроХрпБ</span>
                </button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script src="contributor.js"></script>
</body>
</html>